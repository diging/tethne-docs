<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>tethne.networks.features module &mdash; tethne 0.6.0-beta documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.0-beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="top" title="tethne 0.6.0-beta documentation" href="index.html" >
    <link rel="up" title="tethne.networks package" href="tethne.networks.html" >
    <link rel="next" title="tethne.networks.helpers module" href="tethne.networks.helpers.html" >
    <link rel="prev" title="tethne.networks.authors module" href="tethne.networks.authors.html" > 
  </head>
  <body>

<div class="container">
  <div class="top-scipy-org-logo-header">
    <a href="index.html">
      <img style="border: 0; height: 60px;" alt="SciPy" src="_static/img/logo_long_devo.png"></a>
    </div>
  </div>
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="http://diging.github.io/tethne/">Tethne</a></li>
	
        <li class="active"><a href="index.html">tethne 0.6.0-beta documentation</a></li>
	
          <li class="active"><a href="tethne.html" >tethne API</a></li>
          <li class="active"><a href="tethne.networks.html" accesskey="U">tethne.networks package</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="tethne.networks.helpers.html" title="tethne.networks.helpers module"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="tethne.networks.authors.html" title="tethne.networks.authors module"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="module-tethne.networks.features">
<span id="tethne-networks-features-module"></span><h1>tethne.networks.features module<a class="headerlink" href="#module-tethne.networks.features" title="Permalink to this headline">¶</a></h1>
<p>Methods for building networks from terms in bibliographic records. This
includes keywords, abstract terms, etc.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#tethne.networks.features.cooccurrence" title="tethne.networks.features.cooccurrence"><tt class="xref py py-obj docutils literal"><span class="pre">cooccurrence</span></tt></a></td>
<td>Generates a cooccurrence graph for features in <tt class="docutils literal"><span class="pre">featureset</span></tt>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#tethne.networks.features.mutual_information" title="tethne.networks.features.mutual_information"><tt class="xref py py-obj docutils literal"><span class="pre">mutual_information</span></tt></a></td>
<td>Generates a graph of features in <tt class="docutils literal"><span class="pre">featureset</span></tt> based on normalized  <a class="reference external" href="http://en.wikipedia.org/wiki/Pointwise_mutual_information">pointwise mutual information (nPMI)</a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#tethne.networks.features.keyword_cooccurrence" title="tethne.networks.features.keyword_cooccurrence"><tt class="xref py py-obj docutils literal"><span class="pre">keyword_cooccurrence</span></tt></a></td>
<td>Generates a keyword cooccurrence network.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#tethne.networks.features.topic_coupling" title="tethne.networks.features.topic_coupling"><tt class="xref py py-obj docutils literal"><span class="pre">topic_coupling</span></tt></a></td>
<td>Creates a network of words connected by implication in a common topic(s).</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="tethne.networks.features.cooccurrence">
<tt class="descclassname">tethne.networks.features.</tt><tt class="descname">cooccurrence</tt><big>(</big><em>papers</em>, <em>featureset</em>, <em>filter=&lt;function _filter at 0x107e10c08&gt;</em>, <em>graph=True</em>, <em>threshold=20</em>, <em>indexed_by='doi'</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/tethne/networks/features.html#cooccurrence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tethne.networks.features.cooccurrence" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a cooccurrence graph for features in <tt class="docutils literal"><span class="pre">featureset</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">filter</span></tt> is a method applied to each feature, used to determine whether
a feature should be included in the graph <strong>before</strong> co-occurrence values
are generated. This can cut down on computational expense. <tt class="docutils literal"><span class="pre">filter</span></tt> should
accept the following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">s</span></tt></td>
<td>Representation of the feature (e.g. a string).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">C</span></tt></td>
<td>The overall frequency of the feature in the
<a class="reference internal" href="tethne.classes.corpus.html#tethne.classes.corpus.Corpus" title="tethne.classes.corpus.Corpus"><tt class="xref py py-class docutils literal"><span class="pre">Corpus</span></tt></a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DC</span></tt></td>
<td>The number of documents in which the feature occurs.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">N</span></tt></td>
<td>Total number of documents in the <a class="reference internal" href="tethne.classes.corpus.html#tethne.classes.corpus.Corpus" title="tethne.classes.corpus.Corpus"><tt class="xref py py-class docutils literal"><span class="pre">Corpus</span></tt></a>.</td>
</tr>
</tbody>
</table>
<p>The default filter is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">_filter</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">DC</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">C</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">DC</span> <span class="o">&gt;</span> <span class="n">N</span><span class="o">*</span><span class="mf">0.05</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">True</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>papers</strong> : list</p>
<blockquote>
<div><p>A list of <a class="reference internal" href="tethne.classes.paper.html#tethne.classes.paper.Paper" title="tethne.classes.paper.Paper"><tt class="xref py py-class docutils literal"><span class="pre">Paper</span></tt></a> instances.</p>
</div></blockquote>
<p><strong>featurset</strong> : dict</p>
<blockquote>
<div><p>A featureset from a <a class="reference internal" href="tethne.classes.corpus.html#tethne.classes.corpus.Corpus" title="tethne.classes.corpus.Corpus"><tt class="xref py py-class docutils literal"><span class="pre">Corpus</span></tt></a>.</p>
</div></blockquote>
<p><strong>filter</strong> : method</p>
<blockquote>
<div><p>Method applied to each feature; should return True if the feature should
be included, and False otherwise. See above.</p>
</div></blockquote>
<p><strong>graph</strong> : bool</p>
<blockquote>
<div><p>(default: True) If False, returns a dictionary of co-occurrence values
instead of a Graph.</p>
</div></blockquote>
<p><strong>threshold</strong> : int</p>
<blockquote>
<div><p>(default: 20) Minimum co-occurrence value for inclusion in the Graph. 
If <tt class="docutils literal"><span class="pre">graph</span></tt> is False, this has no effect.</p>
</div></blockquote>
<p><strong>indexed_by</strong> : str</p>
<blockquote>
<div><p>(default: &#8216;doi&#8217;) Field in <a class="reference internal" href="tethne.classes.paper.html#tethne.classes.paper.Paper" title="tethne.classes.paper.Paper"><tt class="xref py py-class docutils literal"><span class="pre">Paper</span></tt></a> used as indexing values in 
<tt class="docutils literal"><span class="pre">featureset</span></tt>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">networkx.Graph or dict</p>
<blockquote class="last">
<div><p>See <tt class="docutils literal"><span class="pre">graph</span></tt> parameter, above.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tethne.networks.features.keyword_cooccurrence">
<tt class="descclassname">tethne.networks.features.</tt><tt class="descname">keyword_cooccurrence</tt><big>(</big><em>papers</em>, <em>threshold</em>, <em>connected=False</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/tethne/networks/features.html#keyword_cooccurrence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tethne.networks.features.keyword_cooccurrence" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a keyword cooccurrence network.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>papers</strong> : list</p>
<blockquote>
<div><p>A list of <a class="reference internal" href="tethne.classes.paper.html#tethne.classes.paper.Paper" title="tethne.classes.paper.Paper"><tt class="xref py py-class docutils literal"><span class="pre">Paper</span></tt></a> objects.</p>
</div></blockquote>
<p><strong>threshold</strong> : int</p>
<blockquote>
<div><p>Minimum number of occurrences for a keyword pair to appear in graph.</p>
</div></blockquote>
<p><strong>connected</strong> : bool</p>
<blockquote>
<div><p>If True, returns only the largest connected component.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>k_coccurrence</strong> :  networkx.Graph</p>
<blockquote class="last">
<div><p>A keyword coccurrence network.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Not thoroughly tested.</p>
<p><strong>TODO</strong></p>
<ul class="simple">
<li>Incorporate this into the featureset framework.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="tethne.networks.features.mutual_information">
<tt class="descclassname">tethne.networks.features.</tt><tt class="descname">mutual_information</tt><big>(</big><em>papers</em>, <em>featureset</em>, <em>filter=None</em>, <em>threshold=0.5</em>, <em>indexed_by='doi'</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/tethne/networks/features.html#mutual_information"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tethne.networks.features.mutual_information" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a graph of features in <tt class="docutils literal"><span class="pre">featureset</span></tt> based on normalized 
<a class="reference external" href="http://en.wikipedia.org/wiki/Pointwise_mutual_information">pointwise mutual information (nPMI)</a>.</p>
<div class="math">
<p><img src="_images/math/eefb2b6c95453da21d668d8df7c5c5de4e52294c.png" alt="nPMI(i,j)=\frac{log(\frac{p_{ij}}{p_i*p_j})}{-1*log(p_{ij})}"/></p>
</div><p>...where <img class="math" src="_images/math/17dc853fcfa1cbce916eef14b9368e1574d92cd2.png" alt="p_i" style="vertical-align: -3px"/> and <img class="math" src="_images/math/f01c6e93fdff47067321a1b403ea980d0a1339d8.png" alt="p_j" style="vertical-align: -4px"/> are the probabilities that features
<em>i</em> and <em>j</em> will occur in a document (independently), and <img class="math" src="_images/math/567f0d285b4679fbe8eaa2f2e2fc38f5c7b67290.png" alt="p_{ij}" style="vertical-align: -4px"/> is
the probability that those two features will occur in the same document.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>papers</strong> : list</p>
<blockquote>
<div><p>A list of <a class="reference internal" href="tethne.classes.paper.html#tethne.classes.paper.Paper" title="tethne.classes.paper.Paper"><tt class="xref py py-class docutils literal"><span class="pre">Paper</span></tt></a> instances.</p>
</div></blockquote>
<p><strong>featurset</strong> : dict</p>
<blockquote>
<div><p>A featureset from a <a class="reference internal" href="tethne.classes.corpus.html#tethne.classes.corpus.Corpus" title="tethne.classes.corpus.Corpus"><tt class="xref py py-class docutils literal"><span class="pre">Corpus</span></tt></a>.</p>
</div></blockquote>
<p><strong>filter</strong> : method</p>
<blockquote>
<div><p>Method applied to each feature prior to calculating co-occurrence.
See <a class="reference internal" href="#tethne.networks.features.cooccurrence" title="tethne.networks.features.cooccurrence"><tt class="xref py py-func docutils literal"><span class="pre">cooccurrence()</span></tt></a>.</p>
</div></blockquote>
<p><strong>threshold</strong> : float</p>
<blockquote>
<div><p>(default: 0.5) Minimum nPMI for inclusion the graph.</p>
</div></blockquote>
<p><strong>indexed_by</strong> : str</p>
<blockquote>
<div><p>(default: &#8216;doi&#8217;) Field in <a class="reference internal" href="tethne.classes.paper.html#tethne.classes.paper.Paper" title="tethne.classes.paper.Paper"><tt class="xref py py-class docutils literal"><span class="pre">Paper</span></tt></a> used as indexing values in
<tt class="docutils literal"><span class="pre">featureset</span></tt>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>graph</strong> : networkx.Graph</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Using wordcount data from JSTOR Data-for-Research, we can generate a nPMI
network as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tethne.readers</span> <span class="kn">import</span> <span class="n">dfr</span>               <span class="c"># Prep corpus.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyCorpus</span> <span class="o">=</span> <span class="n">dfr</span><span class="o">.</span><span class="n">read_corpus</span><span class="p">(</span><span class="n">datapath</span><span class="o">+</span><span class="s">&#39;/dfr&#39;</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;uni&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyCorpus</span><span class="o">.</span><span class="n">filter_features</span><span class="p">(</span><span class="s">&#39;unigrams&#39;</span><span class="p">,</span> <span class="s">&#39;u_filtered&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s">&#39;u_filtered&#39;</span><span class="p">,</span> <span class="s">&#39;u_tfidf&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tethne.networks</span> <span class="kn">import</span> <span class="n">features</span>         <span class="c"># Build graph.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">graph</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">mutual_information</span><span class="p">(</span><span class="n">MyCorpus</span><span class="o">.</span><span class="n">all_papers</span><span class="p">(),</span> <span class="s">&#39;u_tfidf&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tethne.writers.graph</span> <span class="kn">import</span> <span class="n">to_graphml</span>  <span class="c"># Export graph.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">to_graphml</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="s">&#39;/path/to/my/graph.graphml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here&#8217;s a small cluster from a similar graph, visualized in Cytoscape:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/nPMI_phosphorus.png"><img alt="_images/nPMI_phosphorus.png" src="_images/nPMI_phosphorus.png" style="width: 400px;" /></a>
<p class="caption">Edge weight and opacity indicate nPMI values.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tethne.networks.features.topic_coupling">
<tt class="descclassname">tethne.networks.features.</tt><tt class="descname">topic_coupling</tt><big>(</big><em>model</em>, <em>threshold=0.005</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/tethne/networks/features.html#topic_coupling"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tethne.networks.features.topic_coupling" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a network of words connected by implication in a common topic(s).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : <a class="reference internal" href="tethne.model.corpus.ldamodel.html#tethne.model.corpus.ldamodel.LDAModel" title="tethne.model.corpus.ldamodel.LDAModel"><tt class="xref py py-class docutils literal"><span class="pre">LDAModel</span></tt></a></p>
<p><strong>threshold</strong> : float</p>
<blockquote>
<div><p>Minimum P(W|T) for coupling.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tc</strong> : networkx.Graph</p>
<blockquote class="last">
<div><p>A topic-coupling graph, where nodes are terms.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tethne.networks</span> <span class="kn">import</span> <span class="n">features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">features</span><span class="o">.</span><span class="n">topic_coupling</span><span class="p">(</span><span class="n">MyLDAModel</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.015</span><span class="p">)</span>
</pre></div>
</div>
<p>Here&#8217;s a similar network, visualized in Cytoscape:</p>
<a class="reference internal image-reference" href="_images/semantic_network.png"><img alt="_images/semantic_network.png" class="align-center" src="_images/semantic_network.png" style="width: 600px;" /></a>
<p>For details, see <a class="reference internal" href="tutorial.mallet.html#mallet-tutorial"><em>Generating and Visualizing Topic Models with Tethne and MALLET</em></a>.</p>
</dd></dl>

</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_round.png" alt="Logo">
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="tethne.networks.authors.html"
                        title="previous chapter">tethne.networks.authors module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tethne.networks.helpers.html"
                        title="next chapter">tethne.networks.helpers module</a></p>
  <h3>This Page</h3>
  <div>
    <a href="_sources/tethne.networks.features.txt"
       rel="nofollow">Show Source</a>
  </div>
<div class="this-page-menu">
  <a href="/scipy/docs/scipy-docs/tethne.networks.features.rst">Edit page</a>
</div>

        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2013, ASU Digital Innovation Group.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>